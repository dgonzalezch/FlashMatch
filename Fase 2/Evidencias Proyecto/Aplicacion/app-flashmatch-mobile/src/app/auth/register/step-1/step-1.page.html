<app-header [typeMenu]="'public-route'"/>

<ion-content [fullscreen]="true" class="ion-padding" >
  <ion-grid class="ion-no-padding">
    <ion-row class="ion-justify-content-center">
      <ion-col size-xs="auto">
        <ion-card class="ion-no-margin">
          <ion-card-content>
            <ion-row class="ion-align-items-center ion-justify-content-center">
              <ion-col size="auto">
                <ion-icon name="person-outline" style="font-size: 25px; margin-right: 10px;"></ion-icon>
              </ion-col>
              <ion-col>
                <ion-text>
                  <b>Primero,</b> ingresa tus datos que se asociarán a la cuenta.
                </ion-text>
              </ion-col>
            </ion-row>
          </ion-card-content>
        </ion-card>
      </ion-col>

      <ion-col size-xs="12">
        <form [formGroup]="step1Form" class="ion-margin-vertical" id="step1Form" (ngSubmit)="onSubmit()">

          <!-- NOMBRE -->
          <ion-input type="text" formControlName="nombre" class="ion-input-form" preventSpaces label="Nombre*" labelPlacement="floating" [clearInput]="true"/>
          @if (step1Form.get('nombre')?.touched && step1Form.get('nombre')?.invalid) {
            <ion-text class="text-small" color="danger">
              @switch (true) {
                @case (step1Form.get('nombre')?.hasError('required')) {
                  *El nombre es requerido.
                }
                @case (step1Form.get('nombre')?.hasError('minlength')) {
                  *El nombre debe tener al menos 2 caracteres.
                }
                @case (step1Form.get('nombre')?.hasError('maxlength')) {
                  *El nombre no puede ser mayor a 50 caracteres.
                }
              }
            </ion-text>
          }

          <!-- APELLIDO -->
          <ion-input type="text" formControlName="apellido" class="ion-input-form" preventSpaces label="Apellido*" labelPlacement="floating" [clearInput]="true"/>
          @if (step1Form.get('apellido')?.touched && step1Form.get('apellido')?.invalid) {
            <ion-text class="text-small" color="danger">
              @switch (true) {
                @case (step1Form.get('apellido')?.hasError('required')) {
                  *El apellido es requerido.
                }
                @case (step1Form.get('apellido')?.hasError('minlength')) {
                  *El apellido debe tener al menos 2 caracteres.
                }
                @case (step1Form.get('apellido')?.hasError('maxlength')) {
                  *El apellido no puede ser mayor a 50 caracteres.
                }
              }
            </ion-text>
          }

          <!-- RUT -->
          <ion-input type="text" formControlName="rut" class="ion-input-form" preventSpaces formatRut label="RUT*" maxlength="12" labelPlacement="floating" [clearInput]="true"/>
          @if (step1Form.get('rut')?.touched && step1Form.get('rut')?.invalid) {
            <ion-text class="text-small" color="danger">
              @switch (true) {
                @case (step1Form.get('rut')?.hasError('required')) {
                  *El RUT es requerido.
                }
                @case (step1Form.get('rut')?.hasError('invalidRUT') ) {
                  El RUT ingresado no es válido.
                }
              }
            </ion-text>
          }

          <!-- TELEFONO -->
          <ion-input type="tel" formControlName="telefono" class="ion-input-form" preventSpaces onlyNumbers label="Número de teléfono*" placeholder="9123456" labelPlacement="floating" maxlength="9" [clearInput]="true"/>
          @if (step1Form.get('telefono')?.touched && step1Form.get('telefono')?.invalid) {
            <ion-text class="text-small" color="danger">
              @switch (true) {
                @case (step1Form.get('telefono')?.hasError('required')) {
                  *El teléfono es requerido.
                }
                @case (step1Form.get('telefono')?.hasError('minlength')) {
                  *El teléfono debe tener al menos 9 caracteres.
                }
              }
            </ion-text>
          }
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer class="ion-no-border ion-padding">
  <ion-toolbar>
    <ion-button class="ion-no-margin" color="tertiary" expand="block"
      type="submit" form="step1Form" [disabled]="!step1Form.valid">Siguiente
    </ion-button>
  </ion-toolbar>
</ion-footer>
